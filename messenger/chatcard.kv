#:import ASSETS_FONTS settings.ASSETS_FONTS
#:import FONT settings.FONT
#:import join os.path.join
<ChatCard>:
    orientation: 'vertical'
    size_hint_y: None
    height: "60dp"
    on_release: root.open_chat(self)
    chat: root.chat

    MDBoxLayout:
        padding: "10dp", 0, "10dp", 0
        spacing: "6dp"

        FitImage:
            id: avatar
            source: root.avatar
            size_hint: None, None
            height: root.height - 8
            width: root.height - 8
            radius: int((root.height - 8) / 2)
            pos_hint: {"center_y": 0.5}

        MDBoxLayout:
            orientation: 'vertical'
            padding: 0, 0, 0, "6dp"

            MDBoxLayout:
                MDLabel:
                    id: display_name
                    text: root.display_name
                    font_size: "16sp"
                    #font_name: "Roboto-Regular-Emoji.ttf"
                    #font_name: join(ASSETS_FONTS, FONT)
                    shorten: True
                    shorten_from: "right"
                    bold: True
                    size_hint_x: 2.0
                    pos_hint: {"center_y": .45}
                    markup: True

                MDLabel:
                    id: time
                    halign: "right"
                    text: root.time
                    shorten: True
                    shorten_from: "right"
                    font_size: "15sp"

            MDBoxLayout:
                MDLabel:
                    id: message
                    text: root.message
                    font_name: join(ASSETS_FONTS, FONT)
                    shorten: True
                    shorten_from: "right"
                    pos_hint: {"center_y": .4}

                MDLabel:
                    id: unread_label
                    text: str(root.unread)
                    text_size: self.size
                    halign: "center"
                    valign: "center"
                    width: f"{len(str(root.unread))*13 + 6}dp" if root.unread else "0dp"
                    size_hint_x: None
                    md_bg_color: 64/255, 165/255, 224/255, 1
                    theme_text_color: "Custom" # Secondary
                    radius: "12dp"
                    text_color: 229/255, 255/255, 204/255, 1


